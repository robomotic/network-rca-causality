/home/robomotic/DevOps/CISCO/experiments/exploratory_analysis.py:81: ConstantInputWarning: An input array is constant; the correlation coefficient is not defined.
  corr, pval = pearsonr(before_combined[var1], before_combined[var2])
/home/robomotic/DevOps/CISCO/experiments/exploratory_analysis.py:99: ConstantInputWarning: An input array is constant; the correlation coefficient is not defined.
  corr, pval = pearsonr(after_combined[var1], after_combined[var2])
/home/robomotic/DevOps/CISCO/.venv/lib/python3.11/site-packages/statsmodels/tsa/stattools.py:1556: FutureWarning: verbose is deprecated since functions should not print results
  warnings.warn(
/home/robomotic/DevOps/CISCO/.venv/lib/python3.11/site-packages/dowhy/causal_refuter.py:161: RuntimeWarning: invalid value encountered in scalar divide
  z_score = (estimate.value - mean_refute_values) / std_dev_refute_values
Preparing data...
Loading data...
Processing traffic volumes...
Processing system crashes...
Processing admin activity...
Features saved to output/causal_features.csv

============================================================
PHASE 1: EXPLORATORY (NON-CAUSAL) ANALYSIS
============================================================

=== Crash Proximity Correlation Analysis ===

Analyzing 264 hours before 44 crashes...
Analyzing 264 hours after crashes...

Top 5 correlations BEFORE crashes:
  RSTP_is_throttled <-> HTTP_is_throttled: r=nan, p=nan
  RSTP_is_throttled <-> SMB_is_throttled: r=nan, p=nan
  RSTP_vol <-> HTTP_is_throttled: r=nan, p=nan
  RSTP_vol <-> SMB_is_throttled: r=nan, p=nan
  RSTP_vol <-> SMB_vol: r=0.3036, p=4.9197e-07

Top 5 correlations AFTER crashes:
  RSTP_is_throttled <-> HTTP_is_throttled: r=nan, p=nan
  RSTP_is_throttled <-> SMB_is_throttled: r=nan, p=nan
  RSTP_vol <-> HTTP_is_throttled: r=nan, p=nan
  RSTP_vol <-> SMB_is_throttled: r=nan, p=nan
  RSTP_vol <-> SMB_vol: r=0.5483, p=4.0409e-22

=== Anomaly Detection ===
RSTP: 438 anomalies (5.00%), 3 coincide with crashes
HTTP: 437 anomalies (4.99%), 22 coincide with crashes
HTTPS: 437 anomalies (4.99%), 26 coincide with crashes
DNS: 438 anomalies (5.00%), 22 coincide with crashes
SMB: 435 anomalies (4.97%), 14 coincide with crashes
Saved: experiments/anomaly_detection.png

=== Decision Tree Analysis ===

Classification Report:
              precision    recall  f1-score   support

    No Crash       1.00      1.00      1.00      2615
       Crash       0.67      0.15      0.25        13

    accuracy                           1.00      2628
   macro avg       0.83      0.58      0.62      2628
weighted avg       0.99      1.00      0.99      2628


Feature Importance:
               feature  importance
6            HTTPS_vol    0.364273
3    RSTP_is_throttled    0.266118
8              DNS_vol    0.205210
0                 hour    0.099925
2             RSTP_vol    0.064474
1          day_of_week    0.000000
5    HTTP_is_throttled    0.000000
4             HTTP_vol    0.000000
7   HTTPS_is_throttled    0.000000
9     DNS_is_throttled    0.000000
10             SMB_vol    0.000000
11    SMB_is_throttled    0.000000
Saved: experiments/decision_tree.png

============================================================
PHASE 2: CAUSAL DISCOVERY
============================================================
Running comprehensive correlation analysis...
Running Granger causality tests...

Running PCMCI causal discovery...
Saving causal graph visualization...
Saved comprehensive causal graph visualization

============================================================
GENERATING COMPREHENSIVE REPORT
============================================================
Traceback (most recent call last):
  File "/home/robomotic/DevOps/CISCO/experiments/run_experiments.py", line 678, in <module>
    run_all_analysis()
  File "/home/robomotic/DevOps/CISCO/experiments/run_experiments.py", line 675, in run_all_analysis
    generate_report(exploratory_res, correlation_res, granger_res, pcmci_res, dowhy_res)
  File "/home/robomotic/DevOps/CISCO/experiments/run_experiments.py", line 91, in generate_report
    for proto in protocols:
                 ^^^^^^^^^
NameError: name 'protocols' is not defined
